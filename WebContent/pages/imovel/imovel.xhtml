<ui:composition template="/resources/templates/templateCRUD.xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core" xmlns:ts="http://java.sun.com/jsf/composite/components" xmlns:pe="http://primefaces.org/ui/extensions">

	<ui:param name="mbean" value="${imovelFaces}" />
	<ui:param name="mbeanModel" value="${imovelFaces.crudModel}" />
	<ui:param name="mbeanPesquisaModel" value="${imovelFaces.crudPesquisaModel}" />
	<ui:param name="possuiDadosAtualizacao" value="true" />

	<ui:define name="cadastro">

		<p:fieldset legend="Dados do imóvel" style="margin-top: 5px;">

			<h:panelGroup layout="block" styleClass="Container10">
				<p:outputLabel for="codigo" value="Código" />
				<p:inputText id="codigo" value="#{mbeanModel.codigo}" required="true" maxlength="10" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container15">
				<p:outputLabel for="somTipoImovel" value="Tipo" />
				<p:selectOneMenu id="somTipoImovel" value="#{mbeanModel.tipoImovelModel.id}" required="true" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboTipoImovel}" />
				</p:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<p:outputLabel for="areaPrivativa" value="Área privativa" />
				<p:inputNumber id="areaPrivativa" value="#{mbeanModel.areaPrivativa}" required="true" symbol=" m²" symbolPosition="s" decimalSeparator="," thousandSeparator="." maxValue="99999999" styleClass="autoComplete90" style="text-align:right">
					<p:ajax global="false" process="@this" update="valorMetroQuadrado" />
				</p:inputNumber>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container15">
				<p:outputLabel for="itValor" value="Valor Venda" />
				<p:inputNumber id="itValor" value="#{mbeanModel.valor}" symbol="R$ " decimalSeparator="," thousandSeparator="." maxValue="99999999" styleClass="autoComplete90" style="text-align:right">
					<p:ajax global="false" process="@this" update="valorMetroQuadrado" />
				</p:inputNumber>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="M² Venda" />
				<p:inputNumber id="valorMetroQuadrado" value="#{mbeanModel.valorMetroQuadrado}" symbol="R$ " disabled="true" decimalSeparator="," thousandSeparator="." maxValue="99999999" styleClass="autoComplete90" style="text-align:right" />
			</h:panelGroup>


			<h:panelGroup layout="block" styleClass="Container10">
				<p:outputLabel for="itValorAluguel" value="Valor Locação" />
				<p:inputNumber id="itValorAluguel" value="#{mbeanModel.valorAluguel}" symbol="R$ " decimalSeparator="," thousandSeparator="." maxValue="99999" styleClass="autoComplete90" style="text-align:right">
					<p:ajax global="false" process="@this" update="valorLocacao" />
				</p:inputNumber>
			</h:panelGroup>

			<h:panelGroup id="valorLocacao" layout="block" styleClass="Container10" rendered="#{mbeanModel.flagAluguel}">
				<h:outputText value="M² Locação" />
				<p:inputNumber value="#{mbeanModel.valorMetroQuadradoLocacao}" symbol="R$ " disabled="true" decimalSeparator="," thousandSeparator="." maxValue="99999999" styleClass="autoComplete90" style="text-align:right" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Cond." />
				<p:inputNumber value="#{mbeanModel.valorCondominio}" symbol="R$ " decimalSeparator="," thousandSeparator="." maxValue="99999999" styleClass="autoComplete90" style="text-align:right" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="IPTU" />
				<p:inputNumber value="#{mbeanModel.valorIPTU}" symbol="R$ " decimalSeparator="," thousandSeparator="." maxValue="99999" styleClass="autoComplete90" style="text-align:right" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container100">
				<h:outputText value="Título do Anúncio" />
				<p:inputText value="#{mbeanModel.tituloAnuncio}" maxlength="100" styleClass="coluna100" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container100">
				<h:outputText value="Corpo do Anúncio" />
				<p:inputTextarea value="#{mbeanModel.descricaoAnuncio}" rows="10" autoResize="false" styleClass="coluna100" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container20">
				<h:outputText value="Posição do sol" />
				<p:selectOneMenu value="#{mbeanModel.posicaoSolModel.id}" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboPosicaoSol}" />
				</p:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Quartos" />
				<p:inputText value="#{mbeanModel.quartos}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Suites" />
				<p:inputText value="#{mbeanModel.suites}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Banheiros" />
				<p:inputText value="#{mbeanModel.banheiros}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Qtd. Vagas" />
				<p:inputText value="#{mbeanModel.qtdVagasEstacionamento}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="V. Cobertas" />
				<p:inputText value="#{mbeanModel.qtdVagasCobertas}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="V. Descobertas" />
				<p:inputText value="#{mbeanModel.qtdVagasDescobertas}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="V. Soltas" />
				<p:inputText value="#{mbeanModel.qtdVagasSoltas}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Vagas Rotativas" />
				<br />
				<p:selectBooleanCheckbox value="#{mbeanModel.flagVariasVagas}" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Varandas" />
				<p:inputText value="#{mbeanModel.varandas}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Dependências" />
				<p:inputText value="#{mbeanModel.dependencias}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="WC Empregadas" />
				<p:inputText value="#{mbeanModel.wcEmpregadas}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Closets" />
				<p:inputText value="#{mbeanModel.closets}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Pavimentos" />
				<p:inputText value="#{mbeanModel.pavimentos}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Home Offices" />
				<p:inputText value="#{mbeanModel.homeOffices}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Despensas" />
				<p:inputText value="#{mbeanModel.despensas}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Depósitos" />
				<p:inputText value="#{mbeanModel.depositos}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Qtd. Elevadores" />
				<p:inputText value="#{mbeanModel.qtdElevadores}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container5">
				<p:outputLabel for="flagAtivo" value="Ativo?" />
				<br />
				<p:selectBooleanCheckbox id="flagAtivo" value="#{mbeanModel.flagAtivo}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<p:outputLabel for="flagNaoAnunciar" value="Não Anunciar" />
				<br />
				<p:selectBooleanCheckbox id="flagNaoAnunciar" value="#{mbeanModel.flagNaoAnunciar}" />
			</h:panelGroup>

		</p:fieldset>
		
		<p:remoteCommand name="ordenar" action="#{imovelFaces.ordenar}" process="@this" update="dgFotos" />
		
		<p:fieldset legend="Fotos" collapsed="true" toggleable="true">

			<h:panelGroup id="dgFotos">

				<p:fileUpload label="Selecionar Fotos" fileUploadListener="#{mbean.enviarFoto}" mode="advanced" multiple="true" process="@this" update="dgFotos" auto="true" dragDropSupport="true" sequential="true" sizeLimit="2048000" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" style="width: 98%" />
				
				<style>
			  		#sortable { list-style-type: none; margin: 0; padding: 0; width: 100%; }
			  		#sortable li { margin: 3px 3px 3px 0; padding: 1px; float: left; width: 150px; height: 120px; text-align: center; }
			    </style>
  
				<script>
			  		$(function(){
			    		$("#sortable").sortable({
			    				start: function(event, ui) {
			    			        var start_pos = ui.item.index();
			    			        ui.item.data('start_pos', start_pos);
			    			    },
			    			    update: function (event, ui) {
			    			        var start_pos = ui.item.data('start_pos');
			    			        var end_pos = ui.item.index();
			    			        ordenar([{name: 'indexStart', value: start_pos}, {name: 'indexEnd', value: end_pos}]);
			    			    }
			    			    });
			    		$("#sortable").disableSelection();
			  		});
			    </script>
			  
			  <ul id="sortable">
			  		<ui:repeat value="#{mbeanModel.fotos}" var="linha">
				  		<li>
				  			<p:commandLink process="@this" update=":tabview:frmTabCadastro:spFotos" oncomplete="PF('dlgFoto').show()">
								<div style="height: 80px"><p:graphicImage value="#{linha.arquivoMini}" stream="false" style="with: 100%" /></div>
								<f:setPropertyActionListener target="#{mbean.imovelFotoSelecionadaModel}" value="#{linha}" />
							</p:commandLink>
							<p:commandLink title="Clique aqui para excluir a imagem" styleClass="fa icon-trash Fs22" action="#{mbean.removeFoto}" process="@this" update=":tabview:frmTabCadastro:dgFotos">
								<f:setPropertyActionListener target="#{mbean.imovelFotoSelecionadaModel}" value="#{linha}" />
							</p:commandLink>
				  		</li>
					</ui:repeat>
				</ul>
  
  				<div class="EmptyBox5" />
  				
  				<div align="right">
					<p:commandButton ajax="false" value="Baixar Fotos" icon="fa icon-download-cloud white" action="#{mbean.baixarFotos}" rendered="#{!empty mbeanModel.fotos}" style="margin-top: 5px" />
				</div>

			</h:panelGroup>

		</p:fieldset>

		<p:fieldset legend="Endereço" style="margin-top: 5px;">

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Cep" />
				<p:inputMask mask="99.999-999" value="#{mbeanModel.cep}" maxlength="10" styleClass="coluna95" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container50">
				<h:outputText value="Endereço" />
				<p:inputText value="#{mbeanModel.endereco}" maxlength="100" styleClass="coluna98" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container40">
				<h:outputText value="Complemento" />
				<p:inputText value="#{mbeanModel.complemento}" maxlength="100" styleClass="coluna98" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container25">
				<p:outputLabel for="somBairro" value="Bairro" />
				<p:selectOneMenu id="somBairro" value="#{mbeanModel.bairroModel.id}" required="true" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboBairro}" />
					<p:ajax global="false" listener="#{mbean.carregarComboCondominio}" process="@this" update="somCondominio" />
				</p:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container25">
				<h:outputText value="Condomínio" />
				<p:selectOneMenu id="somCondominio" value="#{mbeanModel.condominioModel.id}" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboCondominio}" />
					<p:ajax global="false" listener="#{mbean.carregarComboEdificio}" process="@this" update="somEdificio" />
				</p:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container30">
				<h:outputText value="Edifício" />
				<p:selectOneMenu id="somEdificio" value="#{mbeanModel.edificioModel.id}" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboEdificio}" />
				</p:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Andar" />
				<p:inputText value="#{mbeanModel.andar}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Unidade" />
				<p:inputText value="#{mbeanModel.unidade}" maxlength="100" styleClass="coluna90" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container100">
				<h:outputText value="Ponto de Referência" />
				<p:inputText value="#{mbeanModel.pontoReferencia}" maxlength="100" styleClass="coluna100" />
			</h:panelGroup>

		</p:fieldset>

		<p:fieldset legend="Dados da Construção" style="margin-top: 5px;">

			<h:panelGroup layout="block" styleClass="Container35">
				<h:outputText value="Construtora" />
				<p:selectOneMenu value="#{mbeanModel.construtoraModel.id}" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboConstrutora}" />
				</p:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<h:outputText value="Tipo de piso da sala" />
				<p:selectOneMenu value="#{mbeanModel.tipoPisoSalaModel.id}" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboTipoPiso}" />
				</p:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<h:outputText value="Tipo de piso do quarto" />
				<p:selectOneMenu value="#{mbeanModel.tipoPisoQuartoModel.id}" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboTipoPiso}" />
				</p:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Ano construção" />
				<p:inputText value="#{mbeanModel.anoConstrucao}" maxlength="4" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container15">
				<h:outputText value="Tipo de Fachada" />
				<p:selectOneMenu value="#{mbeanModel.tipoFachadaModel.id}" styleClass="coluna90">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboTipoFachada}" />
				</p:selectOneMenu>
			</h:panelGroup>

		</p:fieldset>

		<p:fieldset legend="Características" style="margin-top: 5px;">

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Armários banheiros" value="#{mbeanModel.flagArmariosBanheiro}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Armários cozinhas" value="#{mbeanModel.flagArmariosCozinha}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Armários quartos" value="#{mbeanModel.flagArmariosQuartos}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Cozinha Americana" value="#{mbeanModel.flagCozinhaAmericana}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Piscina Privativa" value="#{mbeanModel.flagPiscinaPrivativa}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Salão de festas" value="#{mbeanModel.flagSalaoFestas}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Playground" value="#{mbeanModel.flagPlayground}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Piscina" value="#{mbeanModel.flagPiscina}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Academia" value="#{mbeanModel.flagAcademia}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Quadra Poliesportiva" value="#{mbeanModel.flagQuadraPoliesportiva}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Parque infantil" value="#{mbeanModel.flagParqueInfantil}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Sauna" value="#{mbeanModel.flagSauna}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Salão de jogos" value="#{mbeanModel.flagSalaoJogos}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Churrasqueira" value="#{mbeanModel.flagChurrasqueira}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Brinquedoteca" value="#{mbeanModel.flagBrinquedoteca}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Cinema" value="#{mbeanModel.flagCinema}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Quadra de Squash" value="#{mbeanModel.flagQuadraSquash}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Quadra de Tênis" value="#{mbeanModel.flagQuadraTenis}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Campo" value="#{mbeanModel.flagCampo}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Estacionamento de Visitante" value="#{mbeanModel.flagEstacionamentoVisitante}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Água individual" value="#{mbeanModel.flagAguaIndividual}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Gás individual" value="#{mbeanModel.flagGasIndividual}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Gerador próprio" value="#{mbeanModel.flagGeradorProprio}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Mobiliado" value="#{mbeanModel.flagMobiliado}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Infraestrutura" value="#{mbeanModel.flagInfraestrutura}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Elevador" value="#{mbeanModel.flagElevador}" />
			</h:panelGroup>

		</p:fieldset>

		<p:fieldset legend="Informações Adicionais" style="margin-top: 5px;">

			<h:panelGroup layout="block" styleClass="Container35">
				<h:outputText value="Nome do Administrador" />
				<p:inputText value="#{mbeanModel.nomeAdministrador}" maxlength="100" styleClass="coluna95" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container15">
				<h:outputText value="Telefone" />
				<p:inputText value="#{mbeanModel.telefoneAdministrador}" maxlength="15" styleClass="coluna90 telefone" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container100">
				<h:outputText value="Descrição da mobília" />
				<p:inputTextarea value="#{mbeanModel.descricaoMobilia}" rows="3" autoResize="false" styleClass="coluna100" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Utilizou FGTS" value="#{mbeanModel.flagUtilizouFgts}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Imóvel Quitado" value="#{mbeanModel.flagImovelQuitado}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Terreno Foreiro" value="#{mbeanModel.flagTerrenoForeiro}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Exclusividade" value="#{mbeanModel.flagExclusividade}" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<p:selectBooleanCheckbox itemLabel="Habitado" value="#{mbeanModel.flagHabitado}" />
			</h:panelGroup>

		</p:fieldset>

		<p:fieldset id="fsInformacoesGerenciais" legend="Informações Gerenciais" style="margin-top: 5px;">

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Data da captação" />
				<p:calendar id="dataCaptacao" value="#{mbeanModel.dataCaptacao}" pattern="dd/MM/yyyy" maxlength="10" navigator="true" onkeydown="maskDate(this,event,'dd/MM/yyyy')" onfocus="focusDate(this);" onblur="blurDate(this)" locale="pt_BR" styleClass="autoComplete90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container20">
				<h:outputText value="Captador" />
				<p:selectOneMenu value="#{mbeanModel.captadorModel.id}" required="true" label="Captador" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboCaptador}" />
				</p:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container10">
				<h:outputText value="Comissão" />
				<p:inputText value="#{mbeanModel.comissao}" maxlength="100" styleClass="coluna90" />
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="Container60">
				<h:outputText value="Proprietário" />
				<br />
				<p:selectOneMenu value="#{mbeanModel.proprietarioModel.id}" styleClass="coluna90">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboProprietario}" />
				</p:selectOneMenu>
				<p:commandButton icon="fa icon-clipboard white" action="#{mbean.carregarProprietario}" process="@this, fsInformacoesGerenciais" update=":tabview:formProprietario:pgDadosProprietario" oncomplete="if(!args.validationFailed){PF('dlgDadosProprietario').show()}" style="margin-left: 5px; top: -10px" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container100">
				<h:outputText value="Motivo da Venda" />
				<p:inputTextarea value="#{mbeanModel.motivoVenda}" rows="3" autoResize="false" styleClass="coluna99" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container100">
				<h:outputText value="Outros imóveis a venda" />
				<p:inputTextarea value="#{mbeanModel.outrosImoveisVenda}" rows="3" autoResize="false" styleClass="coluna99" />
			</h:panelGroup>

			<div class="EmptyBox5" />

			<h:panelGroup layout="block" styleClass="Container100">
				<h:outputText value="Observações" />
				<p:inputTextarea value="#{mbeanModel.observacoes}" rows="3" autoResize="false" styleClass="coluna99" />
			</h:panelGroup>

		</p:fieldset>

		<p:fieldset id="fsAtualizacoes" legend="Atualizações" rendered="#{!empty mbeanModel.id}">

			<p:commandButton value="Adicionar" icon="fa icon-plus-squared white" action="#{mbean.instanciarAtualizacao}" oncomplete="PF('dlgAtualizacao').show()" update="pgAtualizacao" />

			<p:dataTable id="dtAtualizacoes" value="#{mbeanModel.atualizacoes}" var="linha" emptyMessage="Nenhuma atualização adicionada" style="margin-top:5px">

				<p:column headerText="Data" styleClass="coluna15">
					<h:outputText value="#{linha.data}">
						<f:convertDateTime pattern="dd/MM/yyyy HH:mm" locale="pt_BR" />
					</h:outputText>
				</p:column>

				<p:column headerText="Responsável" styleClass="coluna30">
					<h:outputText value="#{linha.usuarioCadastroModel.nome}" />
				</p:column>

				<p:column headerText="Tipo" styleClass="coluna20">
					<h:outputText value="#{linha.tipoAtualizacaoImovelModel.descricao}" />
				</p:column>

				<p:column headerText="Observação" styleClass="coluna30">
					<h:outputText value="#{linha.observacao}" />
				</p:column>

				<p:column headerText="" styleClass="coluna1">
					<div align="center">
						<p:commandLink title="Clique aqui para alterar a atualização" action="#{mbean.obterAtualizacao(linha)}" process="@this" update=":tabview:frmTabCadastro:pgAtualizacao" oncomplete="PF('dlgAtualizacao').show()">
							<h:graphicImage value="../resources/images/doc.png" style="border: 0px" />
						</p:commandLink>
					</div>
				</p:column>

				<p:column headerText="" styleClass="coluna1">
					<div align="center">
						<p:commandLink title="Clique aqui para remover a atualização" styleClass="ui-icon cancelar16" process="@this" oncomplete="PF('cdExcluirAtualizacao').show()">
							<f:setPropertyActionListener target="#{imovelFaces.imovelAtualizacaoSelecionadoModel}" value="#{linha}" />
						</p:commandLink>
					</div>
				</p:column>

			</p:dataTable>

		</p:fieldset>

		<p:fieldset legend="Clientes com Perfil" toggleable="true" style="margin-top: 5px;">

			<p:dataTable value="#{mbeanModel.clientesPerfil}" var="linha" emptyMessage="Nenhum cliente tem perfil para esse imóvel">

				<p:column headerText="Data" styleClass="coluna15">
					<p:commandLink ajax="false" action="#{mbean.redirecionarCliente(linha)}">
						<h:outputText value="#{linha.dataCadastro}">
							<ui:include src="/resources/templates/include_gmt_format.xhtml" />
						</h:outputText>
					</p:commandLink>
				</p:column>

				<p:column headerText="Responsável" styleClass="coluna20">
					<p:commandLink ajax="false" action="#{mbean.redirecionarCliente(linha)}">
						<h:outputText value="#{linha.usuarioCadastroModel.nome}" />
					</p:commandLink>
				</p:column>

				<p:column headerText="Status" styleClass="coluna10">
					<p:commandLink ajax="false" action="#{mbean.redirecionarCliente(linha)}">
						<h:outputText value="#{linha.statusAtualModel.descricao}" />
					</p:commandLink>
				</p:column>

				<p:column headerText="Nome" styleClass="coluna65">
					<p:commandLink ajax="false" action="#{mbean.redirecionarCliente(linha)}">
						<h:outputText value="#{linha.nome}" />
					</p:commandLink>
				</p:column>

			</p:dataTable>

		</p:fieldset>

		<p:confirmDialog message="Confirma exclusão da atualização?" header="Aviso" severity="alert" widgetVar="cdExcluirAtualizacao">
			<p:commandButton value="Sim" onclick="PF('cdExcluirAtualizacao').hide()" action="#{mbean.removeAtualizacao}" process="@this" update="dtAtualizacoes" />
			<p:commandButton type="button" value="Não" onclick="PF('cdExcluirAtualizacao').hide()" />
		</p:confirmDialog>

		<p:dialog id="dialogAtualizacao" modal="true" closeOnEscape="true" widgetVar="dlgAtualizacao" header="Adicionar Atualização" styleClass="dialog60">

			<h:panelGroup id="pgAtualizacao">

				<p:scrollPanel id="spAtualizacao" mode="native" styleClass="scrollPanelDialog60">

					<h:panelGroup layout="block" styleClass="Container20">
						<h:outputText value="Data" />
						<p:calendar id="dataAtualizacao" value="#{mbean.imovelAtualizacaoModel.data}" pattern="dd/MM/yyyy HH:mm" maxlength="16" size="18" onfocus="focusDate(this);" onkeydown="maskDate(this,event,'dd/MM/yyyy HH:mm')" onblur="blurDate(this)" navigator="true" showButtonPanel="true" locale="pt_BR" styleClass="autoComplete90" />
					</h:panelGroup>

					<h:panelGroup layout="block" styleClass="Container80">
						<h:outputText value="Tipo de Atualização" />
						<p:selectOneMenu value="#{mbean.imovelAtualizacaoModel.tipoAtualizacaoImovelModel.id}" styleClass="coluna95">
							<f:selectItem itemValue="" itemLabel="Não selecionado" />
							<f:selectItems value="#{mbean.comboTipoAtualizacaoImovel}" />
						</p:selectOneMenu>
					</h:panelGroup>

					<div class="EmptyBox5" />

					<h:panelGroup layout="block" styleClass="Container100">
						<h:outputText value="Observação" />
						<p:inputTextarea id="itaObservacao" value="#{mbean.imovelAtualizacaoModel.observacao}" rows="5" autoResize="false" styleClass="coluna100" style="height: calc(60vh - 220px);" />
					</h:panelGroup>

				</p:scrollPanel>

				<p:panel style="margin-top: 5px;">
					<p:commandButton value="Gravar" icon="fa icon-floppy white" action="#{mbean.inserirAtualizacao}" update="dtAtualizacoes" oncomplete="handleRequest('dlgAtualizacao', args);" rendered="#{empty mbean.imovelAtualizacaoModel.id}" />
					<p:commandButton value="Gravar" icon="fa icon-floppy white" action="#{mbean.alterarAtualizacao}" update="dtAtualizacoes" oncomplete="handleRequest('dlgAtualizacao', args);" rendered="#{!empty mbean.imovelAtualizacaoModel.id}" />
					<p:commandButton type="button" value="Fechar" icon="fa icon-cancel white" onclick="PF('dlgAtualizacao').hide();" />
				</p:panel>

			</h:panelGroup>

		</p:dialog>

		<p:dialog dynamic="true" modal="true" resizable="false" closeOnEscape="true" widgetVar="dlgFoto" header="Visualização de Foto" styleClass="dialog90">

			<h:panelGroup id="pgFotos">

				<p:scrollPanel id="spFotos" mode="native" styleClass="scrollPanelDialog90">

					<div align="center">
						<p:graphicImage value="#{mbean.imovelFotoSelecionadaModel.arquivoView}" stream="false" style="max-width: 100%" />
					</div>

				</p:scrollPanel>

				<p:panel style="margin-top: 5px;">
					<p:commandButton type="button" value="Fechar" icon="fa icon-cancel white" onclick="PF('dlgFoto').hide();" />
				</p:panel>

			</h:panelGroup>

		</p:dialog>

	</ui:define>

	<ui:define name="cadastroSemForm">

		<p:dialog dynamic="true" modal="true" resizable="false" closeOnEscape="true" widgetVar="dlgDadosProprietario" header="Proprietário" styleClass="dialog80">

			<h:form id="formProprietario" prependId="false">

				<h:panelGroup id="pgDadosProprietario">

					<p:scrollPanel id="spDadosProprietario" mode="native" styleClass="scrollPanelDialog">

						<h:panelGrid style="width: 100%">

							<ui:include src="/pages/proprietario/include_dados_proprietario.xhtml">
								<ui:param name="mbeanProprietarioModel" value="#{mbeanModel.proprietarioModel}" />
							</ui:include>

						</h:panelGrid>

						<script type="text/javascript">
							$(document)
									.ready(
											function() {
												$(
														"div[id*=spDadosProprietario]")
														.height(
																$(window)
																		.height() * 0.8 - 120);
											});
						</script>

					</p:scrollPanel>

					<p:panel style="margin: 5px;">
						<p:commandButton value="Gravar" icon="fa icon-floppy white" action="#{mbean.salvarProprietario}" process="@this, pgDadosProprietario" update="pgDadosProprietario, :tabview:frmTabCadastro:fsInformacoesGerenciais" oncomplete="handleRequest('dlgDadosProprietario', args)" />
						<p:commandButton type="button" value="Fechar" icon="fa icon-cancel white" onclick="PF('dlgDadosProprietario').hide();" />
					</p:panel>

				</h:panelGroup>

				<p:outputPanel autoUpdate="true">
					<script type="text/javascript">
						
					</script>
				</p:outputPanel>

			</h:form>

		</p:dialog>

	</ui:define>

	<ui:define name="pesquisaCampos">

		<p:fieldset>

			<h:panelGrid columns="6" columnClasses="coluna10, coluna10, coluna15, coluna20, coluna35, coluna10" style="width: 100%">

				<h:outputText value="Código" />
				<h:outputText value="Tipo" />
				<h:outputText value="Captador" />
				<h:outputText value="Proprietário" />
				<h:outputText value="Condomínio" />
				<h:outputText value="Ativo?" />

				<p:inputText value="#{mbeanPesquisaModel.codigo}" styleClass="coluna95" />
				<p:selectOneMenu value="#{mbeanPesquisaModel.tipoImovelModel.id}" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboTipoImovel}" />
				</p:selectOneMenu>
				<p:selectOneMenu value="#{mbeanPesquisaModel.captadorModel.id}" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboCaptador}" />
				</p:selectOneMenu>
				<p:selectOneMenu value="#{mbeanPesquisaModel.proprietarioModel.id}" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboProprietario}" />
				</p:selectOneMenu>
				<p:selectOneMenu value="#{mbeanPesquisaModel.condominioModel.id}" styleClass="coluna95">
					<f:selectItem itemValue="" itemLabel="Não Selecionado" />
					<f:selectItems value="#{mbean.comboCondominio}" />
				</p:selectOneMenu>
				<p:selectBooleanCheckbox value="#{mbeanPesquisaModel.flagAtivo}" />

			</h:panelGrid>

		</p:fieldset>

		<h:panelGrid columns="3" style="width: 70%">

			<p:fieldset legend="Valor">
				<h:panelGrid columns="3" columnClasses="coluna49, coluna2, coluna49" styleClass="coluna98">
					<p:inputNumber value="#{mbeanPesquisaModel.valorMin}" symbol="R$ " decimalSeparator="," thousandSeparator="." maxValue="99999999" styleClass="autoComplete90" style="text-align:right" />
					<h:outputText value="a" />
					<p:inputNumber value="#{mbeanPesquisaModel.valorMax}" symbol="R$ " decimalSeparator="," thousandSeparator="." maxValue="99999999" styleClass="autoComplete90" style="text-align:right" />
				</h:panelGrid>
			</p:fieldset>

			<p:fieldset legend="Valor do Condomínio">
				<h:panelGrid columns="3" columnClasses="coluna49, coluna2, coluna49" styleClass="coluna98">
					<p:inputNumber value="#{mbeanPesquisaModel.valorCondominioMin}" symbol="R$ " decimalSeparator="," thousandSeparator="." maxValue="99999999" styleClass="autoComplete90" style="text-align:right" />
					<h:outputText value="a" />
					<p:inputNumber value="#{mbeanPesquisaModel.valorCondominioMax}" symbol="R$ " decimalSeparator="," thousandSeparator="." maxValue="99999999" styleClass="autoComplete90" style="text-align:right" />
				</h:panelGrid>
			</p:fieldset>

			<p:fieldset legend="Quartos">
				<h:panelGrid columns="3" columnClasses="coluna49, coluna2, coluna49" styleClass="coluna98">
					<p:inputText value="#{mbeanPesquisaModel.quartosMin}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
					<h:outputText value="a" />
					<p:inputText value="#{mbeanPesquisaModel.quartosMax}" maxlength="2" onkeypress="return Mascara(this,Integer);" onblur="return Mascara(this,Integer);" styleClass="coluna90" />
				</h:panelGrid>
			</p:fieldset>

		</h:panelGrid>

		<h:panelGrid style="width: 100%">

			<p:fieldset legend="Bairros" collapsed="true" toggleable="true">
				<p:selectManyCheckbox value="#{mbeanPesquisaModel.bairrosPesquisa}" layout="grid" columns="9">
					<f:selectItems value="#{mbean.bairros}" var="bairro" itemLabel="#{bairro.descricao}" itemValue="#{bairro.descricao}" />
				</p:selectManyCheckbox>
			</p:fieldset>

		</h:panelGrid>

	</ui:define>

	<ui:define name="colunasTabela">

		<p:column headerText="Código" styleClass="coluna05">
			<p:commandLink ajax="false" action="#{mbean.detailEvent}">
				<h:outputText value="#{linha.codigo}" />
				<f:setPropertyActionListener target="#{mbeanModel.id}" value="#{linha.id}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="Tipo" styleClass="coluna10">
			<p:commandLink ajax="false" action="#{mbean.detailEvent}">
				<h:outputText value="#{linha.tipoImovelModel.descricao}" />
				<f:setPropertyActionListener target="#{mbeanModel.id}" value="#{linha.id}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="Captador" styleClass="coluna20">
			<p:commandLink ajax="false" action="#{mbean.detailEvent}">
				<h:outputText value="#{linha.captadorModel.nome}" />
				<f:setPropertyActionListener target="#{mbeanModel.id}" value="#{linha.id}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="Bairro" styleClass="coluna15">
			<p:commandLink ajax="false" action="#{mbean.detailEvent}">
				<h:outputText value="#{linha.bairroModel.descricao}" />
				<f:setPropertyActionListener target="#{mbeanModel.id}" value="#{linha.id}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="Edifício" styleClass="coluna20">
			<p:commandLink ajax="false" action="#{mbean.detailEvent}">
				<h:outputText value="#{linha.edificioModel.descricao}" />
				<f:setPropertyActionListener target="#{mbeanModel.id}" value="#{linha.id}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="Valor" styleClass="coluna05">
			<p:commandLink ajax="false" action="#{mbean.detailEvent}">
				<h:outputText value="#{linha.valor}">
					<f:convertNumber type="number" pattern="#,###,##0.##" locale="pt_BR" />
				</h:outputText>
				<f:setPropertyActionListener target="#{mbeanModel.id}" value="#{linha.id}" />
			</p:commandLink>
		</p:column>

	</ui:define>

</ui:composition>
